:root {
    --bg-dark: #0a0e14; --bg-panel: #111922; --bg-card: #172232; --bg-hover: #1e3048;
    --bg-input: #0d1520; --border: #1e3048; --border-gold: #c8aa6e;
    --gold: #c8aa6e; --gold-light: #f0d68a; --blue: #0ac8b9; --red: #e84057;
    --green: #49b54e; --text: #d4d8de; --text-dim: #7b8fa3; --text-bright: #ecf0f5;
    --purple: #9b59b6; --font: 'Segoe UI',system-ui,sans-serif; --radius: 6px; --transition: .2s ease;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--bg-dark); color:var(--text); font-family:var(--font); height:100vh; overflow:hidden; }

/* ===================== HEADER ===================== */
#app-header {
    display:flex; align-items:center; justify-content:space-between; padding:10px 20px;
    background:linear-gradient(180deg,#151d2b,#0a0e14); border-bottom:1px solid var(--border);
}
.header-left { display:flex; align-items:center; gap:12px; }
#app-header h1 { font-size:1.3rem; color:var(--gold); letter-spacing:1px; }
.header-subtitle { font-size:.75rem; color:var(--text-dim); font-style:italic; }
.header-right { display:flex; align-items:center; gap:10px; }

select,input[type="text"] {
    background:var(--bg-input); border:1px solid var(--border); color:var(--text);
    padding:7px 12px; border-radius:var(--radius); font-size:.85rem; font-family:var(--font); outline:none;
}
select:focus,input[type="text"]:focus { border-color:var(--gold); }

/* Help button */
.btn-help {
    width:28px; height:28px; border-radius:50%; border:1px solid var(--blue); background:transparent;
    color:var(--blue); font-size:.85rem; font-weight:700; cursor:pointer; transition:var(--transition);
}
.btn-help:hover { background:rgba(10,200,185,.15); }
.btn-help.active { background:rgba(10,200,185,.2); border-color:var(--gold); color:var(--gold); }

/* ===================== HELP BANNER ===================== */
.help-banner {
    background:linear-gradient(135deg, rgba(10,200,185,.08), rgba(200,170,110,.06));
    border-bottom:1px solid var(--border); padding:14px 20px; position:relative;
    animation: slideDown .3s ease;
}
@keyframes slideDown { from { opacity:0; transform:translateY(-10px); } to { opacity:1; transform:translateY(0); } }
.help-content {
    display:flex; gap:24px; flex-wrap:wrap; align-items:flex-start; padding-right:30px;
}
.help-step {
    display:flex; gap:10px; align-items:flex-start; min-width:200px; flex:1;
}
.help-num {
    display:flex; align-items:center; justify-content:center;
    width:28px; height:28px; min-width:28px; border-radius:50%;
    background:var(--blue); color:var(--bg-dark); font-weight:700; font-size:.85rem;
}
.help-step strong { color:var(--text-bright); font-size:.85rem; }
.help-step p { color:var(--text-dim); font-size:.75rem; margin-top:2px; line-height:1.4; }
.btn-close-help {
    position:absolute; top:10px; right:14px; background:none; border:none;
    color:var(--text-dim); font-size:1.3rem; cursor:pointer;
}
.btn-close-help:hover { color:var(--text-bright); }

/* ===================== TOOLTIPS ===================== */
.help-tip {
    display:inline-flex; align-items:center; justify-content:center;
    width:16px; height:16px; border-radius:50%; background:rgba(10,200,185,.15);
    color:var(--blue); font-size:.6rem; font-weight:700; cursor:help;
    position:relative; margin-left:4px; vertical-align:middle; border:1px solid rgba(10,200,185,.3);
}
.help-tip.small { width:14px; height:14px; font-size:.55rem; }
.help-tip:hover::after {
    content:attr(data-tooltip);
    position:absolute; bottom:calc(100% + 6px); left:50%; transform:translateX(-50%);
    background:var(--bg-card); border:1px solid var(--border-gold); color:var(--text-bright);
    padding:8px 12px; border-radius:var(--radius); font-size:.75rem; font-weight:400;
    white-space:normal; width:240px; z-index:50; line-height:1.4;
    box-shadow:0 4px 16px rgba(0,0,0,.4); text-align:left;
}
.help-tip:hover::before {
    content:''; position:absolute; bottom:calc(100% + 2px); left:50%; transform:translateX(-50%);
    border:4px solid transparent; border-top-color:var(--border-gold); z-index:51;
}

/* Step badge */
.step-badge {
    display:inline-flex; align-items:center; justify-content:center;
    width:18px; height:18px; border-radius:50%; font-size:.6rem; font-weight:700;
    background:var(--blue); color:var(--bg-dark); margin-right:4px;
}

/* ===================== SETUP PANEL ===================== */
#setup-panel { padding:12px 20px; background:var(--bg-panel); border-bottom:1px solid var(--border); }
.setup-row { display:flex; align-items:flex-end; gap:20px; flex-wrap:wrap; }
.setup-group { display:flex; flex-direction:column; gap:5px; }
.setup-group label {
    font-size:.7rem; color:var(--text-dim); text-transform:uppercase; letter-spacing:1px;
    display:flex; align-items:center;
}
.input-row { display:flex; gap:5px; }
.input-row input { width:200px; }

/* Role buttons */
.role-selector { display:flex; gap:3px; }
.role-btn {
    padding:6px 14px; border:1px solid var(--border); border-radius:var(--radius);
    background:var(--bg-card); color:var(--text-dim); cursor:pointer; font-size:.82rem;
    transition:var(--transition); display:flex; align-items:center; gap:4px;
}
.role-btn:hover { background:var(--bg-hover); }
.role-btn.active { border-color:var(--blue); color:var(--blue); background:rgba(10,200,185,.1); }
.role-icon { font-size:.9rem; }

/* Buttons */
.btn-primary {
    padding:7px 18px; border:none; border-radius:var(--radius); background:var(--gold);
    color:#0a0e14; font-weight:600; cursor:pointer; font-size:.85rem; transition:var(--transition);
}
.btn-primary:hover { background:var(--gold-light); transform:translateY(-1px); }
.btn-primary:disabled { opacity:.5; transform:none; }
.btn-small {
    padding:4px 10px; border:1px solid var(--border); border-radius:var(--radius);
    background:var(--bg-card); color:var(--text-dim); cursor:pointer; font-size:.75rem;
}
.btn-tiny {
    padding:3px 8px; border:1px solid var(--border); border-radius:10px; background:transparent;
    color:var(--text-dim); cursor:pointer; font-size:.7rem; transition:var(--transition);
}
.btn-tiny:hover { background:rgba(232,64,87,.1); }
.btn-danger { border-color:var(--red); color:var(--red); }
.status-text { font-size:.75rem; color:var(--text-dim); }
.hidden { display:none !important; }
.hint { font-size:.75rem; color:var(--text-dim); font-style:italic; }

/* Priority */
.prio-row { display:flex; align-items:center; gap:8px; }
.prio-buttons { display:flex; gap:3px; }
.prio-btn {
    padding:5px 12px; border:1px solid var(--border); border-radius:var(--radius);
    background:var(--bg-card); color:var(--text-dim); cursor:pointer; font-size:.72rem;
    white-space:nowrap; transition:var(--transition); display:flex; align-items:center; gap:4px;
}
.prio-btn:hover { background:var(--bg-hover); }
.prio-icon { font-size:.85rem; }
.prio-btn.active[data-prio="0"] { border-color:var(--gold); color:var(--gold); background:rgba(200,170,110,.08); }
.prio-btn.active[data-prio="50"] { border-color:var(--text-bright); color:var(--text-bright); background:rgba(255,255,255,.04); }
.prio-btn.active[data-prio="100"] { border-color:var(--blue); color:var(--blue); background:rgba(10,200,185,.08); }
.slider-value {
    font-size:.72rem; font-weight:700; color:var(--text-bright);
    background:var(--bg-card); padding:2px 8px; border-radius:10px; min-width:30px; text-align:center;
}
input[type="range"] {
    -webkit-appearance:none; width:100px; height:5px; border-radius:3px;
    background:linear-gradient(90deg,var(--gold),var(--blue)); outline:none; cursor:pointer;
}
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance:none; width:16px; height:16px;
    border-radius:50%; background:var(--text-bright); border:2px solid var(--bg-dark); cursor:pointer;
}

/* ===================== INLINE BAR (picks/bans/pool) ===================== */
.inline-bar { display:flex; align-items:center; gap:16px; margin-top:10px; flex-wrap:wrap; }
.ib-section { display:flex; align-items:center; gap:5px; }
.ib-label { font-size:.72rem; color:var(--text-dim); white-space:nowrap; font-weight:600; }
.ib-label-enemy { color:var(--red); }
.ib-label-ban { color:var(--text-dim); }
.pool-label { color:var(--gold); }
.chip-list { display:flex; gap:3px; align-items:center; }
.pick-chip {
    display:flex; align-items:center; gap:4px; padding:3px 8px 3px 3px;
    background:var(--bg-card); border:1px solid var(--border); border-radius:14px;
    cursor:pointer; transition:var(--transition);
}
.pick-chip:hover { border-color:var(--red); background:rgba(232,64,87,.08); }
.pick-chip img { width:24px; height:24px; border-radius:50%; }
.pick-chip .chip-name { font-size:.7rem; color:var(--text); }
.pick-chip .chip-remove { font-size:.65rem; color:var(--red); margin-left:2px; }
.pick-chip.banned { border-color:rgba(232,64,87,.3); }
.pick-chip.banned img { filter:grayscale(.6); opacity:.7; }

/* Mode toggle */
.mode-toggle { display:flex; gap:2px; }
.mode-btn {
    padding:4px 10px; border:1px solid var(--border); border-radius:var(--radius);
    background:transparent; color:var(--text-dim); cursor:pointer; font-size:.7rem;
    transition:var(--transition); display:flex; align-items:center; gap:4px;
}
.mode-btn:hover { background:var(--bg-hover); }
.mode-btn.active { border-color:var(--blue); color:var(--blue); background:rgba(10,200,185,.08); }
.mode-icon { font-size:.8rem; }
#player-pool-icons .pool-champ {
    width:26px; height:26px; border-radius:50%; border:2px solid var(--border-gold);
    object-fit:cover; transition:var(--transition);
}
#player-pool-icons .pool-champ:hover { transform:scale(1.1); }

/* ===================== ONBOARDING SCREEN ===================== */
.onboarding-screen {
    display:flex; align-items:center; justify-content:center;
    height:calc(100vh - 160px); padding:20px;
}
.onboarding-content {
    text-align:center; max-width:480px;
    background:var(--bg-panel); border:1px solid var(--border); border-radius:16px;
    padding:40px 36px; box-shadow:0 8px 40px rgba(0,0,0,.3);
}
.onboarding-icon { font-size:3.5rem; margin-bottom:12px; }
.onboarding-content h2 { font-size:1.5rem; color:var(--gold); margin-bottom:8px; }
.onboarding-desc { font-size:.95rem; color:var(--text-dim); margin-bottom:24px; line-height:1.5; }
.onboarding-steps { display:flex; flex-direction:column; gap:12px; text-align:left; margin-bottom:20px; }
.ob-step {
    display:flex; align-items:center; gap:12px; padding:10px 14px;
    background:var(--bg-card); border-radius:var(--radius); border:1px solid var(--border);
}
.ob-num {
    display:flex; align-items:center; justify-content:center;
    width:32px; height:32px; min-width:32px; border-radius:50%;
    background:var(--blue); color:var(--bg-dark); font-weight:700; font-size:.95rem;
}
.ob-step span { font-size:.88rem; color:var(--text); line-height:1.4; }
.ob-step strong { color:var(--text-bright); }
.onboarding-hint {
    font-size:.78rem; color:var(--text-dim); font-style:italic; margin-top:4px;
    padding:8px; background:rgba(10,200,185,.05); border-radius:var(--radius); border:1px dashed rgba(10,200,185,.2);
}

/* ===================== MAIN LAYOUT ===================== */
#main-layout { display:grid; grid-template-columns:1fr 360px; height:calc(100vh - 160px); overflow:hidden; }

/* ===================== CHAMPION GRID ===================== */
#champion-grid-section { display:flex; flex-direction:column; overflow:hidden; }
.grid-toolbar {
    padding:10px 14px; background:var(--bg-panel); border-bottom:1px solid var(--border);
    display:flex; align-items:center; gap:12px;
}
.grid-toolbar input { flex:1; }
.grid-legend { display:flex; gap:12px; align-items:center; }
.legend-item { display:flex; align-items:center; gap:4px; font-size:.65rem; color:var(--text-dim); white-space:nowrap; }
.legend-dot { width:10px; height:10px; border-radius:50%; border:2px solid; }
.legend-pool { border-color:var(--gold); background:rgba(200,170,110,.15); }
.legend-hot { border-color:var(--red); background:rgba(232,64,87,.15); }
.legend-rec { border-color:var(--blue); background:rgba(10,200,185,.1); }

.champion-grid {
    display:grid; grid-template-columns:repeat(auto-fill,minmax(82px,1fr)); gap:6px;
    padding:10px 14px; overflow-y:auto; flex:1;
}
.champ-cell {
    display:flex; flex-direction:column; align-items:center; padding:6px 3px;
    border-radius:var(--radius); cursor:pointer; transition:var(--transition);
    border:2px solid transparent; position:relative;
}
.champ-cell:hover { background:var(--bg-hover); border-color:var(--border); transform:translateY(-2px); }
.champ-cell.banned { opacity:.2; pointer-events:none; }
.champ-cell.picked-enemy { opacity:.35; }
.champ-cell.picked-enemy::after {
    content:'ENNEMI'; position:absolute; top:2px; right:0; left:0; text-align:center;
    font-size:.45rem; font-weight:700; background:var(--red); color:#fff;
    padding:1px 3px; border-radius:3px; margin:0 auto; width:fit-content;
}
.champ-cell.in-pool { border-color:var(--gold); }
.champ-cell.hot-pick { border-color:var(--red); background:rgba(232,64,87,.1); }
.champ-cell.hot-pick img { border-color:var(--red); }
.champ-cell.recommended { border-color:var(--blue); background:rgba(10,200,185,.06); }
.champ-cell img {
    width:58px; height:58px; border-radius:50%; object-fit:cover;
    border:2px solid var(--border); transition:var(--transition);
}
.champ-cell:hover img { border-color:var(--text-dim); transform:scale(1.05); }
.champ-cell .champ-name {
    font-size:.65rem; color:var(--text-dim); margin-top:3px; text-align:center;
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:78px;
}
.champ-cell .champ-wr { font-size:.6rem; font-weight:600; }
.champ-wr.high { color:var(--green); } .champ-wr.mid { color:var(--gold); } .champ-wr.low { color:var(--red); }

/* ===================== SIDEBAR ===================== */
#sidebar-right {
    background:var(--bg-panel); border-left:1px solid var(--border);
    display:flex; flex-direction:column; overflow-y:auto; padding:14px 16px;
}
.sidebar-header { display:flex; align-items:center; gap:8px; margin-bottom:10px; }
#sidebar-right h3 {
    font-size:.85rem; color:var(--gold); text-transform:uppercase; letter-spacing:1px;
}
#sidebar-right h3 small { color:var(--text-dim); font-weight:400; }
.rec-context {
    font-size:.78rem; color:var(--text-dim); margin-bottom:10px; padding:8px 10px;
    background:var(--bg-card); border-radius:var(--radius); border-left:3px solid var(--blue);
    line-height:1.4;
}
.rec-context.has-enemy { border-left-color:var(--purple); }

/* Recommendation items */
.rec-item {
    display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:var(--radius);
    margin-bottom:5px; background:var(--bg-card); cursor:pointer;
    border:1px solid transparent; transition:var(--transition);
}
.rec-item:hover { border-color:var(--blue); background:var(--bg-hover); transform:translateX(2px); }
.rec-item .rec-rank { font-size:.95rem; font-weight:700; color:var(--gold); width:20px; text-align:center; }
.rec-item img { width:40px; height:40px; border-radius:50%; border:2px solid var(--border); }
.rec-info { flex:1; }
.rec-name { font-size:.82rem; font-weight:600; color:var(--text-bright); }
.rec-details { font-size:.65rem; color:var(--text-dim); margin-top:2px; line-height:1.3; }
.rec-score { font-size:1.05rem; font-weight:700; color:var(--blue); }
.rec-tag { font-size:.58rem; padding:2px 6px; border-radius:8px; font-weight:600; margin-left:4px; }
.rec-tag.pool { background:rgba(200,170,110,.2); color:var(--gold); }
.rec-tag.counter { background:rgba(155,89,182,.2); color:var(--purple); }
.rec-tag.meta { background:rgba(10,200,185,.2); color:var(--blue); }
.rec-tag.hot { background:rgba(232,64,87,.25); color:#ff6b7a; border:1px solid rgba(232,64,87,.4); }
.score-bar { display:flex; gap:1px; margin-top:3px; height:4px; border-radius:2px; overflow:hidden; width:100%; }
.score-bar .bar-meta { background:var(--blue); } .score-bar .bar-player { background:var(--gold); }
.score-bar .bar-counter { background:var(--purple); }

/* Recommendation legend */
.rec-legend {
    margin-top:auto; padding-top:12px; border-top:1px solid var(--border);
    display:flex; flex-direction:column; gap:5px;
}
.rec-legend-row {
    display:flex; align-items:center; gap:8px; font-size:.68rem; color:var(--text-dim);
}
.legend-bar { width:20px; height:4px; border-radius:2px; }
.legend-bar-meta { background:var(--blue); }
.legend-bar-player { background:var(--gold); }
.legend-bar-counter { background:var(--purple); }

/* ===================== DETAIL PANEL ===================== */
.modal-overlay {
    position:fixed; inset:0; background:rgba(0,0,0,.7); z-index:100;
    display:flex; align-items:center; justify-content:center;
}
.detail-panel {
    background:var(--bg-panel); border:1px solid var(--border-gold); border-radius:12px;
    padding:24px 28px; width:94%; max-width:660px; max-height:88vh; overflow-y:auto; position:relative;
}
.detail-close {
    position:absolute; top:10px; right:14px; background:none; border:none;
    color:var(--text-dim); font-size:1.5rem; cursor:pointer;
}
.detail-close:hover { color:var(--text-bright); }
.detail-header { display:flex; align-items:center; gap:16px; margin-bottom:18px; }
.detail-header img { width:72px; height:72px; border-radius:50%; border:3px solid var(--gold); }
.detail-title h2 { font-size:1.4rem; color:var(--text-bright); }
.detail-title #detail-tags { display:flex; gap:5px; margin-top:4px; }
.detail-title #detail-score-big { font-size:1.5rem; font-weight:700; color:var(--blue); margin-top:3px; }
.detail-stats-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:8px; margin-bottom:18px; }
.stat-card { background:var(--bg-card); border-radius:var(--radius); padding:10px 12px; text-align:center; }
.stat-card .stat-value { font-size:1.15rem; font-weight:700; color:var(--text-bright); }
.stat-card .stat-label { font-size:.62rem; color:var(--text-dim); margin-top:2px; text-transform:uppercase; }
.detail-section { margin-bottom:16px; }
.detail-section h4 {
    font-size:.78rem; color:var(--gold); text-transform:uppercase; letter-spacing:1px; margin-bottom:8px;
}
.section-desc { font-size:.72rem; color:var(--text-dim); margin-bottom:8px; }
.detail-weights { display:flex; gap:10px; flex-wrap:wrap; }
.weight-bar { flex:1; min-width:100px; background:var(--bg-card); border-radius:var(--radius); padding:10px; }
.weight-bar .wb-label { font-size:.68rem; color:var(--text-dim); margin-bottom:4px; }
.weight-bar .wb-track { height:6px; background:var(--bg-input); border-radius:3px; overflow:hidden; }
.weight-bar .wb-fill { height:100%; border-radius:3px; }
.weight-bar .wb-fill.meta { background:var(--blue); }
.weight-bar .wb-fill.player { background:var(--gold); }
.weight-bar .wb-fill.counter { background:var(--purple); }
.weight-bar .wb-score { font-size:.95rem; font-weight:700; color:var(--text-bright); margin-top:4px; }

/* Items build */
.detail-items { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.item-icon {
    width:44px; height:44px; border-radius:var(--radius); border:2px solid var(--border);
    object-fit:cover; background:var(--bg-card); transition:var(--transition);
}
.item-icon:hover { border-color:var(--gold); transform:scale(1.05); }
.item-separator { color:var(--text-dim); font-size:1.2rem; margin:0 2px; }

.detail-chart { max-height:200px; }
.detail-chart canvas { max-height:180px; }

/* ===================== POOL EDITOR ===================== */
.modal-content {
    background:var(--bg-panel); border:1px solid var(--border-gold); border-radius:12px;
    padding:24px; width:90%; max-width:660px; max-height:80vh; overflow-y:auto;
}
.modal-content h2 { color:var(--gold); font-size:1.05rem; margin-bottom:6px; }
.modal-desc { font-size:.78rem; color:var(--text-dim); margin-bottom:12px; line-height:1.4; }
.modal-content input { width:100%; margin-bottom:10px; }
.small-grid { grid-template-columns:repeat(auto-fill,minmax(60px,1fr)); gap:3px; max-height:380px; overflow-y:auto; }
.small-grid .champ-cell img { width:42px; height:42px; }
.modal-actions { margin-top:14px; text-align:right; }

/* ===================== TOAST & LOADING ===================== */
.chart-container { background:var(--bg-card); border-radius:var(--radius); padding:10px; }
.toast {
    position:fixed; bottom:24px; left:50%; transform:translateX(-50%); background:var(--bg-card);
    border:1px solid var(--gold); color:var(--text-bright); padding:10px 24px; border-radius:8px;
    font-size:.88rem; z-index:200; transition:opacity .3s; box-shadow:0 4px 16px rgba(0,0,0,.3);
}
.toast.hidden { opacity:0; pointer-events:none; }
.loading-overlay {
    position:fixed; inset:0; background:rgba(10,14,20,.85); z-index:300;
    display:flex; align-items:center; justify-content:center;
}
.loading-content { text-align:center; }
.loading-content p { margin-top:14px; font-size:.92rem; }
.spinner {
    display:inline-block; width:14px; height:14px; border:2px solid var(--text-dim);
    border-top-color:var(--gold); border-radius:50%; animation:spin .7s linear infinite;
}
.spinner.big { width:38px; height:38px; border-width:3px; }
@keyframes spin { to { transform:rotate(360deg); } }

/* ===================== SCROLLBAR ===================== */
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-track { background:var(--bg-dark); }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:var(--text-dim); }
